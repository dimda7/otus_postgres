
1. поставим  Docker Engine следующими командами:
+ sudo apt-get update
+ sudo dpkg --configure -a
+ curl -s https://repos.influxdata.com/influxdata-archive_compat.key > influxdata-archive_compat.key
+ echo '393e8779c89ac8d958f81f942f9ad7fb82a25e133faddaf92e15b16e6ac9ce4c influxdata-archive_compat.key' | sha256sum -c && cat influxdata-archive_compat.key | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/influxdata-archive_compat.gpg > /dev/null
+ echo 'deb [signed-by=/etc/apt/trusted.gpg.d/influxdata-archive_compat.gpg] https://repos.influxdata.com/debian stable main' | sudo tee /etc/apt/sources.list.d/influxdata.list
+ sudo apt-get update && sudo apt-get install telegraf
+ sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

2. поставим portainer - инструмент для управления контейнерами:
sudo docker run -d -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer

3. создадим папку для "volume":
+ sudo mkdir /var/lib/postgres

4. создадим и запусим контейнер с бд:
+ sudo docker run --name postgres --shm-size=32MB --restart always -p 5432:5432 -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=postgres \
 -e PGDATA=/var/lib/postgresql/data/pgdata -d -v "/var/lib/postgres/data":/var/lib/postgresql/data -d postgres:16.3

5. подключимся в другом контейнере к бд с помощью psql:
+ sudo docker run -it --rm --network bridge postgres psql -h 90.156.218.164 -U postgres

6. Создадим таблицу и добави 2 записи:
CREATE TABLE public.test (
  id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR(32),
  age INTEGER
) ;

INSERT INTO "public"."test" ("name", "age") VALUES ('test', 1);
INSERT INTO "public"."test" ("name", "age") VALUES ('tet', 2);

7. Удалим контейнер и создадим его заново командой из п. 4:
 sudo docker stop  postgres
 sudo docker rm  postgres

8. Откроем порт 5432  в файерволе и добавим строку в файл /var/lib/postgres/data/pgdata/pg_hba.conf 
+ host all all all trust

9. Зайдем в pgadmin и подключимся к БД postgres
+  Увидим, что созданная таблица с данными осталась на месте